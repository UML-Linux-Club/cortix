<?xml version='1.0' encoding='UTF-8'?>
<!-- 
# This file is part of the Cortix toolkit environment
# https://cortix.org
#
# All rights reserved, see COPYRIGHT for full restrictions.
# https://github.com/dpploy/cortix/blob/master/COPYRIGHT.txt
#
# Licensed under the University of Massachusetts Lowell LICENSE:
# https://github.com/dpploy/cortix/blob/master/LICENSE.txt
-->

<!-- Configuration of Cortix -->

<cortix_config version='0.1'>

<!-- ****************************************************************************** -->
<!--                     CORTIX object starts here                                  -->

<!-- Cortix instantiation definition -->
<!-- NB: XML elements in this level must be unique across other configuration files if
         multiple Cortix objects are used in the cortix-main.py program.
         If this rule is not followed, there will be collision with file in/outputs;
         including results files and logging files.-->

 <name>cortix-droplet</name>

 <logger level='DEBUG'>
  <file_handler level='DEBUG'> </file_handler>
  <console_handler level='INFO'> </console_handler>
 </logger>

 <work_dir>/tmp/</work_dir>

 <!-- ============================================================================= -->
 <!--                Simulation object starts here                                  -->

 <!-- Simulation definition -->
 <!-- NB: each simulation has only one application -->

 <simulation name='droplet'>

  <logger level='DEBUG'>
   <file_handler level='DEBUG'> </file_handler>
   <console_handler level='INFO'> </console_handler>
  </logger>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
  <!--                   Tasks objects start here                                   -->

  <!-- Simulation: tasks -->
  <!--NB: each task combines parameters for one named application connectivity-->
  <!--NB: each task name must match a network name below-->

  <task name='droplet-fall' >

   <start_time unit='minute'>0.0</start_time>
   <evolve_time unit='minute'>10.0</evolve_time>
   <time_step unit='second'>0.5</time_step>

   <logger level='DEBUG'>
    <file_handler level='DEBUG'> </file_handler>
    <console_handler level='INFO'> </console_handler>
   </logger>

  </task>

  <task name='droplet-vortex' >

   <start_time unit='minute'>0.0</start_time>
   <evolve_time unit='minute'>2.0</evolve_time>
   <time_step unit='second'>1.0</time_step>

   <logger level='DEBUG'>
    <file_handler level='DEBUG'> </file_handler>
    <console_handler level='INFO'> </console_handler>
   </logger>

  </task>

  <!--                   Tasks objects end here                                     -->
  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <!-- ############################################################################ -->
  <!--                   Application object starts here                             -->

  <!-- Simulation: application -->
  <!-- NB: each simulation has only one application -->

  <application name='droplet'>

   <module_library>
    <home_dir>
   <!-- The home directory of a library is the parent directory of the module.
        For example if this is where the module lives:
            full_path_to_parent_directory/module_name
        the parent directory is:
            full_path_to_parent_directory
   -->
        $CORTIX/cortix/examples/modulib
    </home_dir>
   </module_library>

   <logger level='DEBUG'>
    <file_handler level='DEBUG'> </file_handler>
    <console_handler level='INFO'> </console_handler>
   </logger>

   <!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
   <!--                  Modules objects start here                                 -->
   <!-- Elements allowed: 
      + <input_file_name>: required
      + <input_file_path>: required
      + <library>: optional
          <home_dir>text</home_dir>
      + </library>
   -->
   <!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->

   <module name='droplet'>

    <input_file_name>droplet.input</input_file_name>
    <input_file_path>$CORTIX/cortix/examples/input</input_file_path>

    <logger level='DEBUG'>
     <file_handler level='DEBUG'> </file_handler>
     <console_handler level='INFO'> </console_handler>
    </logger>

   </module>

   <module name='pyplot'>

    <library>
        <home_dir>$CORTIX/cortix/modulib</home_dir>
    </library>

    <input_file_name>pyplot.input</input_file_name>
    <input_file_path>$CORTIX/cortix/examples/input</input_file_path>

    <logger level='DEBUG'>
     <file_handler level='DEBUG'> </file_handler>
     <console_handler level='INFO'> </console_handler>
    </logger>

   </module>

   <module name='wind'>

    <input_file_name>wind.input</input_file_name>
    <input_file_path>$CORTIX/cortix/examples/input/</input_file_path>

    <logger level='DEBUG'>
     <file_handler level='DEBUG'> </file_handler>
     <console_handler level='INFO'> </console_handler>
    </logger>

   </module>

   <!--                  Modules objects end here                                   -->
   <!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->

   <!-- o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o -->
   <!--                  Network objects start here                                 -->

   <!-- Application: networks -->
   <!-- NB: each network has its own task definition above; with the same name -->

   <!-- o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o -->

   <network name='droplet-fall'>
       
    <logger level='DEBUG'>
     <file_handler level='DEBUG'> </file_handler>
     <console_handler level='INFO'> </console_handler>
    </logger>

    <!-- A connect element (or tag) must have no content; use <connect />-->
    <!-- Modules need to be given a slot number; use a colon after the module name 
         followed by an integer-->
    <!-- Example of a connect XML element:

           <connect use_port='port_name @ module_name:slot_number_int'
                    provide_port='port_name @ module_name:slot_number_int' />
    -->

    <connect use_port='time-sequence @ pyplot:0' provide_port='state @ droplet:0' />

   </network>

   <network name='droplet-vortex'>
       
    <logger level='DEBUG'>
     <file_handler level='DEBUG'> </file_handler>
     <console_handler level='INFO'> </console_handler>
    </logger>

    <!-- A connect element (or tag) must have no content; use <connect />-->
    <!-- Modules need to be given a slot number; use a colon after the module name 
         followed by an integer-->
    <!-- Example of a connect XML element:

           <connect use_port='port_name @ module_name:slot_number_int'
                    provide_port='port_name @ module_name:slot_number_int' />
    -->

    <connect use_port='position @ wind:0' provide_port='droplet-position @ droplet:0' />
    <connect use_port='flow-velocity @ droplet:0' provide_port='velocity @ wind:0' />

    <connect use_port='position @ wind:0' provide_port='droplet-position @ droplet:1' />
    <connect use_port='flow-velocity @ droplet:1' provide_port='velocity @ wind:0' />

    <connect use_port='position @ wind:0' provide_port='droplet-position @ droplet:2' />
    <connect use_port='flow-velocity @ droplet:2' provide_port='velocity @ wind:0' />

    <connect use_port='time-sequence @ pyplot:0'  provide_port='state @ droplet:0' />
    <connect use_port='time-sequence @ pyplot:1'  provide_port='state @ droplet:1' />
    <connect use_port='time-sequence @ pyplot:2'  provide_port='state @ droplet:2' />

   </network>

   <!--                  Network objects end here                                   -->
   <!-- o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o-o -->

  <!--                   Application object ends here                               -->
  <!-- ############################################################################ -->
  </application>

 <!--                Simulation object ends here                                    -->
 <!-- ============================================================================= -->
 </simulation>

</cortix_config>
